# Ассистент по организации учебных проектов "Devman"
Приложение для автоматического распределения учеников по командам 

## Что необходимо
1. Python3 должен быть уже установлен. 
2. Рекомендуется использовать [virtualenv/venv](https://docs.python.org/3/library/venv.html) для изоляции проекта.
3. Затем используйте pip (или pip3, есть конфликт с Python2) для установки зависимостей:
```python
pip install -r requirements.txt
```
4. Получите токен в телеграм у `@BotFather` в телеграм.
5. Создайте файл `.env` и пропишите в нем переменную окружения `TELEGRAM_BOT_TOKEN`.
6. Проведите миграцию командой: 
```python
python manage.py migrate
```
7. Cоздайте суперпользователя командой:
```python
python manage.py createsuperuser
```
8. Запустите сервер на локальной машине командой:
```python
python manage.py runserver
```
После чего по адресу http://127.0.0.1:8000/admin/ будет доступна административная панель Django.
9. Запустите бота в отдельной консоле командой:
```python
python manage.py automation_bot
```
## Как использовать
1. Заполните в административной панеле данные о продукт-менеджерах и учениках. Данные об удобном времени для учеников заполнять необязательно (будет записано из бота).
2. Создайте команды в отдельной консоли командой:
```python
python manage.py create_teams
```
Команды будут созданы в соответствии с рабочим временем продукт-менеджеров с интервалом 30 мин.

3. Ученики с помощью телеграм-бота сообщают удобное им время. Данные записываются в базу данных. Имеется возможность изменить время. 
4. Распределите команды:
```python
python manage.py split_teams
```
Ученики будут распределены по командам по 2-3 чел.Непопавшим в команды ученикам будут направлены сообщения в телеграм-бот со списком доступного времени и предложением перенести время. 

5. Ученики непопавшие в команды могут изменить время через телеграм-бота в соответствии с предложенным временем.
6. После этого запустите:
```python
python manage.py add_to_teams
```
Команды по 2 чел. будут доукомплектованы до 3 чел. учениками согласными на перенос времени.
